

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; photomosaic 0.3.1+2.g0b93026 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Obtaining Images for Tiles" href="getting-tiles.html" />
    <link rel="prev" title="photomosaic" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> photomosaic
          

          
          </a>

          
            
            
              <div class="version">
                0.3.1+2.g0b93026
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#set-up">Set Up</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-example">Basic Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detailed-example">Detailed Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prepare-the-image">Prepare the Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-optimize-the-color-palette">Optional: Optimize the Color Palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="#partition-tiles">Partition Tiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#match-tiles-to-pool-images">Match Tiles to Pool Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#draw-mosaic">Draw Mosaic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-tiles.html">Obtaining Images for Tiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="palette.html">Palette Adjustment</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">photomosaic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="set-up">
<span id="setup"></span><h2>Set Up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h2>
<p>To begin, you need an image that you want to mosaic-ify. You can load it like
so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skimage.io</span> <span class="kn">import</span> <span class="n">imread</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s1">&#39;filepath&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can use one of the built-in example images provided by
scikit-image library. We’ll go with the cat picture, <code class="docutils literal notranslate"><span class="pre">chelsea</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load a sample image</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">data</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">chelsea</span><span class="p">()</span>  <span class="c1"># cat picture!</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/chelsea.png" src="_images/chelsea.png" />
</div>
<p>Next, you need large collection of images to fill in the tiles in the mosaic.
If you don’t have a large collection of images handy, you can generate a
collection of solid-color squares. Real photos are more interesting, but
solid-color squares are nice for experimentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">photomosaic</span> <span class="kn">as</span> <span class="nn">pm</span>

<span class="c1"># Generate a collection of solid-color square images.</span>
<span class="n">pm</span><span class="o">.</span><span class="n">rainbow_of_squares</span><span class="p">(</span><span class="s1">&#39;pool/&#39;</span><span class="p">)</span>

<span class="c1"># Analyze the collection (the &quot;pool&quot;) of images.</span>
<span class="n">pool</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">make_pool</span><span class="p">(</span><span class="s1">&#39;pool/*.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-example">
<h2>Basic Example<a class="headerlink" href="#basic-example" title="Permalink to this headline">¶</a></h2>
<p>Now we have everything we need to make a mosaic. Specify the target image
(<code class="docutils literal notranslate"><span class="pre">image</span></code>), the pool of available tile images (<code class="docutils literal notranslate"><span class="pre">pool</span></code>), and the number of
tiles to divide the image into.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a mosiac with 30x30 tiles.</span>
<span class="n">mos</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">basic_mosaic</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">pool</span><span class="p">,</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">mos</span></code> is our mosaic. We can save it</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skimage.io</span> <span class="kn">import</span> <span class="n">imsave</span>
<span class="n">imsave</span><span class="p">(</span><span class="s1">&#39;mosaic.png&#39;</span><span class="p">,</span> <span class="n">mos</span><span class="p">)</span>
</pre></div>
</div>
<p>or plot it using matplotlib.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mos</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/basic.png" src="_images/basic.png" />
</div>
<p>To make a more detailed mosaic, subdivide tiles in important regions. The
optional <code class="docutils literal notranslate"><span class="pre">depth</span></code> parameter selectively splits tiles into quadrants if they
contain a certain amount of contrast.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mos</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">basic_mosaic</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">pool</span><span class="p">,</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/basic-depth1.png" src="_images/basic-depth1.png" />
</div>
<p>More fine-grained control over tile partitioning is shown in the next section.</p>
</div>
<div class="section" id="detailed-example">
<h2>Detailed Example<a class="headerlink" href="#detailed-example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prepare-the-image">
<h3>Prepare the Image<a class="headerlink" href="#prepare-the-image" title="Permalink to this headline">¶</a></h3>
<p>As in the basic example above, we start with a target image, <code class="docutils literal notranslate"><span class="pre">image</span></code>, and a
collection of candidates for the mosaic, <code class="docutils literal notranslate"><span class="pre">pool</span></code>.</p>
<p>The image (represented in Python as a numpy array) should be specified as
floating-point values in the domain 0-1. The utility function <code class="docutils literal notranslate"><span class="pre">img_as_float</span></code>
ensures that that is the case.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Size the image to be evenly divisible by the tiles.</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">img_as_float</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">img_as_float</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
<p>Several of the next steps rely on judging the relative similarity of colors.
To that end, we convert the colors in <code class="docutils literal notranslate"><span class="pre">image</span></code> from an RGB (“red green blue”)
representation to a perceptually-uniform color space. In this representation,
the mathematical difference between two colors is a more accurate estimate of
their perceived “difference” to the human vision system.</p>
<p>(In the <a class="reference internal" href="#setup"><span class="std std-ref">Set Up</span></a> above, <a class="reference internal" href="reference.html#photomosaic.make_pool" title="photomosaic.make_pool"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_pool()</span></code></a> automatically did this for all of
the images in the pool before analyzing their colors.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use perceptually uniform colorspace for all analysis.</span>
<span class="kn">import</span> <span class="nn">photomosaic</span> <span class="kn">as</span> <span class="nn">pm</span>
<span class="n">converted_img</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">perceptual</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="optional-optimize-the-color-palette">
<h3>Optional: Optimize the Color Palette<a class="headerlink" href="#optional-optimize-the-color-palette" title="Permalink to this headline">¶</a></h3>
<p>For best results, use <a class="reference internal" href="reference.html#photomosaic.adapt_to_pool" title="photomosaic.adapt_to_pool"><code class="xref py py-func docutils literal notranslate"><span class="pre">adapt_to_pool()</span></code></a> to “stretch” the color palette
of the image to match the colors available in the pool of candidate images.
This greatly improves the contrast in the final result.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Adapt the color palette of the image to resemble the palette of the pool.</span>
<span class="n">adapted_img</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">adapt_to_pool</span><span class="p">(</span><span class="n">converted_img</span><span class="p">,</span> <span class="n">pool</span><span class="p">)</span>
</pre></div>
</div>
<p>Details and illustrations are given in the section, <a class="reference internal" href="palette.html"><span class="doc">Palette Adjustment</span></a>.</p>
</div>
<div class="section" id="partition-tiles">
<h3>Partition Tiles<a class="headerlink" href="#partition-tiles" title="Permalink to this headline">¶</a></h3>
<p>We will partition the image into tiles. But first, we rescale it (and crop it
if necessary) so that it is evenly divisive. As in the basic example above, the
<code class="docutils literal notranslate"><span class="pre">grid_dims</span></code> gives the number of tiles along each dimension and <code class="docutils literal notranslate"><span class="pre">depth</span></code>
(default 0)` gives the number of times a tile may be subdivided.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scaled_img</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">rescale_commensurate</span><span class="p">(</span><span class="n">adapted_img</span><span class="p">,</span> <span class="n">grid_dims</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, partition the image into tiles.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tiles</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">partition</span><span class="p">(</span><span class="n">scaled_img</span><span class="p">,</span> <span class="n">grid_dims</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is a list of (y, x) slices into the image.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
 <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
 <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
 <span class="o">...&lt;</span><span class="n">snip</span><span class="o">&gt;...</span>
 <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">288</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">336</span><span class="p">,</span> <span class="mi">384</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
 <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">288</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">384</span><span class="p">,</span> <span class="mi">432</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span>
 <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">288</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">432</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Optionally, visualize the tile layout. (Recall that <code class="docutils literal notranslate"><span class="pre">scaled_img</span></code> is
represented in the perceptually-uniform color space; we have to convert it back
to RGB for visualization.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">annotated_img</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">draw_tile_layout</span><span class="p">(</span><span class="n">pm</span><span class="o">.</span><span class="n">rgb</span><span class="p">(</span><span class="n">scaled_img</span><span class="p">),</span> <span class="n">tiles</span><span class="p">)</span>

<span class="c1"># Save the result with imsave, or plot with matplotlib:</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">annotated_img</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/tutorial-1.png" src="_images/tutorial-1.png" />
</div>
</div>
<div class="section" id="match-tiles-to-pool-images">
<h3>Match Tiles to Pool Images<a class="headerlink" href="#match-tiles-to-pool-images" title="Permalink to this headline">¶</a></h3>
<p>First, analyze the average color of each tile in the target image.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># Reshape the 3D array (height, width, color_channels) into</span>
<span class="c1"># a 2D array (num_pixels, color_channels) and average over the pixels.</span>
<span class="n">tile_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scaled_img</span><span class="p">[</span><span class="n">tile</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">tile</span> <span class="ow">in</span> <span class="n">tiles</span><span class="p">]</span>
</pre></div>
</div>
<p>The result is a list of colors, one for each tile in <code class="docutils literal notranslate"><span class="pre">tiles</span></code>. The values in
<code class="docutils literal notranslate"><span class="pre">pool</span></code> were generated using the same algorithm.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">simple_matcher</span></code> takes the analyzed colors in <code class="docutils literal notranslate"><span class="pre">pool</span></code> and loads
them into a data structure for fast nearest-color lookups (a KD tree). It
returns a function, <code class="docutils literal notranslate"><span class="pre">match</span></code>. We map <code class="docutils literal notranslate"><span class="pre">match</span></code> map onto each tile color to
find the corresponding tile’s best match in the pool.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Match a pool image to each tile.</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">simple_matcher</span><span class="p">(</span><span class="n">pool</span><span class="p">)</span>
<span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">match</span><span class="p">(</span><span class="n">tc</span><span class="p">)</span> <span class="k">for</span> <span class="n">tc</span> <span class="ow">in</span> <span class="n">tile_colors</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A different strategy for characterizing the tiles and the pool could be
used. The <code class="docutils literal notranslate"><span class="pre">simpler_matcher</span></code> expects that each tile and each
element in the pool is summarized by some vector. Additionally, a more
complex matching algorithm — say, one that avoids using any element in
the pool more than once — could also be used in place of
<code class="docutils literal notranslate"><span class="pre">simple_matcher</span></code>.</p>
</div>
</div>
<div class="section" id="draw-mosaic">
<h3>Draw Mosaic<a class="headerlink" href="#draw-mosaic" title="Permalink to this headline">¶</a></h3>
<p>First, create a “canvas” image on which to draw the mosiac. Use numpy functions
for generating a “white” or “black” canvas of the right shape,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">scaled_img</span><span class="p">)</span>  <span class="c1"># white canvas</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">scaled_img</span><span class="p">)</span>  <span class="c1"># black canvas</span>
</pre></div>
</div>
<p>or load a background image and scale/crop it the right shape.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skimage.io</span> <span class="kn">import</span> <span class="n">imread</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">crop_to_fit</span><span class="p">(</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">),</span> <span class="n">rescaled_img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, draw the mosiac.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Draw the mosaic.</span>
<span class="n">mos</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">draw_mosaic</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">matches</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/basic-depth1.png" src="_images/basic-depth1.png" />
</div>
<p>Drawing is typically the slowest step. Most of the time is spent resizing
images from the pool to fit their assigned tile in the mosaic.  To speed up
repeated draws, reuse the cache of resized pool images.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">mos1</span> <span class="o">=</span> <span class="n">draw_mosaic</span><span class="p">(</span><span class="n">canvas1</span><span class="p">,</span> <span class="n">tiles1</span><span class="p">,</span> <span class="n">matches1</span><span class="p">,</span> <span class="n">resized_copy_cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span>
<span class="c1"># Now cache is filled with resized copies of any images used in ``mos1``.</span>

<span class="c1"># This will be faster:</span>
<span class="n">mos2</span> <span class="o">=</span> <span class="n">draw_mosaic</span><span class="p">(</span><span class="n">canvas2</span><span class="p">,</span> <span class="n">tiles2</span><span class="p">,</span> <span class="n">matches2</span><span class="p">,</span> <span class="n">resized_copy_cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting-tiles.html" class="btn btn-neutral float-right" title="Obtaining Images for Tiles" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="photomosaic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Photomosaic Contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>