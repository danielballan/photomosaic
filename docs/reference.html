

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reference &mdash; photomosaic 0.3.1+11.g913c49a documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release Notes" href="release-notes.html" />
    <link rel="prev" title="Palette Adjustment" href="palette.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> photomosaic
          

          
          </a>

          
            
            
              <div class="version">
                0.3.1+11.g913c49a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-tiles.html">Obtaining Images for Tiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="palette.html">Palette Adjustment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#candidate-image-pool">Candidate Image Pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#color-conversion">Color Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#color-palettes">Color Palettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tiles">Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matching">Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drawing">Drawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#color-characterization">Color Characterization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">photomosaic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/reference.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="candidate-image-pool">
<h2>Candidate Image Pool<a class="headerlink" href="#candidate-image-pool" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.make_pool">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">make_pool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">glob_string</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">pool</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_read_failures</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">analyzer</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sample_size</span><span class="o">=</span><span class="default_value">1000</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#make_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.make_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze a collection of images.</p>
<p>For each file:
(1) Read image.
(2) Convert to perceptually-uniform color space.
(3) Characterize the colors in the image as a vector.</p>
<p>A progress bar is displayed and then hidden after completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>glob_string</strong><span class="classifier">string</span></dt><dd><p>a filepath with optional wildcards, like <cite>‘*.jpg’</cite></p>
</dd>
<dt><strong>pool</strong><span class="classifier">dict-like, optional</span></dt><dd><p>dict-like data structure to hold results; if None, dict is used</p>
</dd>
<dt><strong>skip_read_failures: bool, optional</strong></dt><dd><p>If True (default), convert any exceptions that occur while reading a
file into warnings and continue.</p>
</dd>
<dt><strong>analyzer</strong><span class="classifier">callable, optional</span></dt><dd><p>Function with signature: <code class="docutils literal notranslate"><span class="pre">f(img)</span> <span class="pre">-&gt;</span> <span class="pre">arr</span></code> where <code class="docutils literal notranslate"><span class="pre">arr</span></code> is a vector.
The default analyzer is <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code> along the 0th axis.</p>
</dd>
<dt><strong>sample_size</strong><span class="classifier">int or None, optional</span></dt><dd><p>Number of pixels to randomly sample before converting to perceptual
colorspace and passing to <code class="docutils literal notranslate"><span class="pre">analyzer</span></code>; if None, do not subsample.
Default is 1000.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pool</strong><span class="classifier">dict-like</span></dt><dd><p>mapping arguments for opening file to analyzer’s result, e.g.:
<code class="docutils literal notranslate"><span class="pre">{(filename,):</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]}</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.import_pool">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">import_pool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#import_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.import_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Import pool from json.</p>
<p>This is a thin convenience wrapper around <code class="docutils literal notranslate"><span class="pre">json.load</span></code>. It puts the data
into the expected data structures, which don’t directly translate to JSON.</p>
<p>Unlike the rest of this package, the export and import functions assume
that the pool is keyed on a tuple with a string (e.g., a filepath) as its
only element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filepath</strong><span class="classifier">string</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pool</strong><span class="classifier">dict</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.export_pool">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">export_pool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pool</span></em>, <em class="sig-param"><span class="n">filepath</span></em>, <em class="sig-param"><span class="n">abspath</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#export_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.export_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Export pool to json.</p>
<p>This is a thin convenience wrapper around <code class="docutils literal notranslate"><span class="pre">json.dump</span></code>. The pool is just a
dict, but it contains numpy arrays, which must be converted to plain lists
before being exported to JSON.</p>
<p>Unlike the rest of this package, the export and import functions assume
that the pool is keyed on a tuple with a string (e.g., a filepath) as its
only element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pool</strong><span class="classifier">dict</span></dt><dd></dd>
<dt><strong>filepath</strong><span class="classifier">string</span></dt><dd></dd>
<dt><strong>abspath</strong><span class="classifier">boolean, optional</span></dt><dd><p>Convert pool keys (assumed to be filenames) to absolute paths if True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.rainbow_of_squares">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">rainbow_of_squares</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_dir</span></em>, <em class="sig-param"><span class="n">shape</span><span class="o">=</span><span class="default_value">(10, 10)</span></em>, <em class="sig-param"><span class="n">range_params</span><span class="o">=</span><span class="default_value">(0, 256, 15)</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#rainbow_of_squares"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.rainbow_of_squares" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate 5832 small solid-color tiles for experimentation and testing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>target_dir</strong><span class="classifier">string</span></dt><dd></dd>
<dt><strong>shape</strong><span class="classifier">tuple, optional</span></dt><dd><p>default is (10, 10)</p>
</dd>
<dt><strong>range_params</strong><span class="classifier">tuple, optional</span></dt><dd><p>Passed to <code class="docutils literal notranslate"><span class="pre">range()</span></code> to stride through each color channel.
Default is <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">256,</span> <span class="pre">15)</span></code>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="color-conversion">
<h2>Color Conversion<a class="headerlink" href="#color-conversion" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.perceptual">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">perceptual</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#perceptual"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.perceptual" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert color from RGB (sRGB1) to a perceptually uniform colorspace.</p>
<p>This is a convenience function wrapping <code class="docutils literal notranslate"><span class="pre">colorspacious.csapce_convert</span></code>.
To configure the specific perceptual colorspace used, change
<code class="docutils literal notranslate"><span class="pre">photomosaic.options['colorspace']</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.rgb">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">rgb</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">clip</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#rgb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.rgb" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert color from a perceptually uniform colorspace to RGB.</p>
<p>This is a convenience function wrapping <code class="docutils literal notranslate"><span class="pre">colorspacious.csapce_convert</span></code>.
To configure the specific perceptual colorspace used, change
<code class="docutils literal notranslate"><span class="pre">photomosaic.options['perceptual']</span></code> and <code class="docutils literal notranslate"><span class="pre">photomosaic.options['rgb']</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>clip</strong><span class="classifier">bool, option</span></dt><dd><p>Clip values out of the gamut [0, 1]. True by default.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.set_options">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">set_options</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">imread</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">perceptual</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rgb</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">flickr_api_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#set_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.set_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Set global options</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>imread</strong><span class="classifier">dict</span></dt><dd><p>keyword arguments passed through to every call to <code class="docutils literal notranslate"><span class="pre">imread</span></code>
e.g., <code class="docutils literal notranslate"><span class="pre">{'plugin':</span> <span class="pre">'matplotlib'}</span></code></p>
</dd>
<dt><strong>perceptual</strong><span class="classifier">string or dict</span></dt><dd><p>perceptually-uniform colorspace used for color comparisions; see
colorspacious documentation for details</p>
</dd>
<dt><strong>rgb</strong><span class="classifier">string or dict</span></dt><dd><p>specific RGB colorspace used for color conversion</p>
</dd>
<dt><strong>flickr_api_key</strong><span class="classifier">string</span></dt><dd><p>API key used by photomosaic.flickr module</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.standardize_image">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">standardize_image</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#standardize_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.standardize_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that image is float 0-1 RGB with no alpha.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd><p>may or may not be a copy of the original</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.rescale_commensurate">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">rescale_commensurate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">grid_dims</span></em>, <em class="sig-param"><span class="n">depth</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#rescale_commensurate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.rescale_commensurate" title="Permalink to this definition">¶</a></dt>
<dd><p>For given grid dimensions and grid subdivision depth, scale image.</p>
<p>The image is rescaled so that its shape can be evenly split into tiles.
If necessary, one dimension is cropped to fit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>grid_dims</strong><span class="classifier">tuple</span></dt><dd><p>Number of tiles along height, width.</p>
</dd>
<dt><strong>depth</strong><span class="classifier">int, optional</span></dt><dd><p>Each tile can be subdivided this many times. Default is 0.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>rescaled_image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.crop_to_fit">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">crop_to_fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">shape</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#crop_to_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.crop_to_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of image resized and cropped to precisely fill a shape.</p>
<p>To resize a colored 2D image, pass in a shape with two entries. When
<code class="docutils literal notranslate"><span class="pre">len(shape)</span> <span class="pre">&lt;</span> <span class="pre">image.ndim</span></code>, higher dimensions are ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>shape</strong><span class="classifier">tuple</span></dt><dd><p>e.g., <code class="docutils literal notranslate"><span class="pre">(height,</span> <span class="pre">width)</span></code> but any length &lt;= <code class="docutils literal notranslate"><span class="pre">image.ndim</span></code> is allowed</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>cropped_image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.sample_pixels">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">sample_pixels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#sample_pixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.sample_pixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly sample pixels from an image.</p>
<p>This is a wrapper around <code class="docutils literal notranslate"><span class="pre">np.random.choice</span></code> (which only works directly
on 1-dimensional arrays).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>size</strong><span class="classifier">int</span></dt><dd><p>number of pixels to sample</p>
</dd>
<dt><strong>replace</strong><span class="classifier">boolean, optional</span></dt><dd><p>whether to sample with or without replacement; default True</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="color-palettes">
<h2>Color Palettes<a class="headerlink" href="#color-palettes" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.adapt_to_pool">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">adapt_to_pool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">pool</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#adapt_to_pool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.adapt_to_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust the color timing of an image to use colors available in the pool.</p>
<p>For meaningful results, <code class="docutils literal notranslate"><span class="pre">image</span></code> and <code class="docutils literal notranslate"><span class="pre">pool</span></code> must be in the same
colorspace.</p>
<p>This is a convenience function wrapping <code class="docutils literal notranslate"><span class="pre">color_palette</span></code> and
<code class="docutils literal notranslate"><span class="pre">palette_map</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>pool</strong><span class="classifier">dict</span></dt><dd></dd>
<dt><strong>mask</strong><span class="classifier">array or None, optional</span></dt><dd><p>must have same shape as <code class="docutils literal notranslate"><span class="pre">image</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>adapted_image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>If the image is RGB, first convert to perceptual space. Finally, before
visualizing, convert back.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rgb</span><span class="p">(</span><span class="n">adapt_to_pool</span><span class="p">(</span><span class="n">perceptual</span><span class="p">(</span><span class="n">image</span><span class="p">),</span> <span class="n">pool</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.color_palette">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">color_palette</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#color_palette"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.color_palette" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the distribution of each color channel.</p>
<p>This wraps <code class="docutils literal notranslate"><span class="pre">numpy.histogram</span></code>, providing data munging relevant to
image array with color channels. See numpy documentation for details on the
meaning of the parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd><p>The last axis is expected to be the color axis.</p>
</dd>
<dt><strong>bins</strong><span class="classifier">int or list</span></dt><dd><p>default 256; passed through to <code class="docutils literal notranslate"><span class="pre">numpy.historgram</span></code></p>
</dd>
<dt><strong>mask</strong><span class="classifier">array or None, optional</span></dt><dd><p>must have same shape as <code class="docutils literal notranslate"><span class="pre">image</span></code></p>
</dd>
<dt><strong>kwargs :</strong></dt><dd><p>passed through to <code class="docutils literal notranslate"><span class="pre">numpy.histogram</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>tuple :</dt><dd><p><code class="docutils literal notranslate"><span class="pre">((counts,</span> <span class="pre">bins),</span> <span class="pre">(counts,</span> <span class="pre">bins),</span> <span class="pre">...)</span></code> – one pair for color channel</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.palette_map">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">palette_map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">old_palette</span></em>, <em class="sig-param"><span class="n">new_palette</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#palette_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.palette_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a function that maps from one color palette onto another.</p>
<p>These is wrapper around <a class="reference internal" href="#photomosaic.hist_map" title="photomosaic.hist_map"><code class="xref py py-func docutils literal notranslate"><span class="pre">hist_map()</span></code></a> that applies it to each color
channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>old_palette: tuple</strong></dt><dd><p>list of histogram arrays <code class="docutils literal notranslate"><span class="pre">(count,</span> <span class="pre">bins)</span></code> for each color channel</p>
</dd>
<dt><strong>new_palette</strong><span class="classifier">tuple</span></dt><dd><p>list of histogram arrays <code class="docutils literal notranslate"><span class="pre">(count,</span> <span class="pre">bins)</span></code> for each color channel</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>f</strong><span class="classifier">function</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.hist_map">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">hist_map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">old_hist</span></em>, <em class="sig-param"><span class="n">new_hist</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#hist_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.hist_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a function that maps from one distribution onto another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>old_hist</strong><span class="classifier">tuple</span></dt><dd><p>Histogram arrays <code class="docutils literal notranslate"><span class="pre">(count,</span> <span class="pre">bins)</span></code> like those from <code class="docutils literal notranslate"><span class="pre">numpy.histogram</span></code>,
where bins give edges, such that <code class="docutils literal notranslate"><span class="pre">len(bins)</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">len(counts)</span></code>.</p>
</dd>
<dt><strong>new_hist</strong><span class="classifier">tuple</span></dt><dd><p>Histogram arrays <code class="docutils literal notranslate"><span class="pre">(count,</span> <span class="pre">bins)</span></code> like those from <code class="docutils literal notranslate"><span class="pre">numpy.histogram</span></code>,
where bins give edges, such that <code class="docutils literal notranslate"><span class="pre">len(bins)</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">len(counts)</span></code>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>f</strong><span class="classifier">function</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.plot_palette">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">plot_palette</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">palette</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#plot_palette"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.plot_palette" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot color palette (histograms of each channel).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>palette</strong><span class="classifier">tuple</span></dt><dd><p>color palette, such as created by <a class="reference internal" href="#photomosaic.color_palette" title="photomosaic.color_palette"><code class="xref py py-func docutils literal notranslate"><span class="pre">color_palette()</span></code></a></p>
</dd>
<dt><strong>**kwargs</strong></dt><dd><p>passed through to <code class="docutils literal notranslate"><span class="pre">matplotlib.Axes.plot</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>lines</strong><span class="classifier">line artists created by matplotlib</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tiles">
<h2>Tiles<a class="headerlink" href="#tiles" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.partition">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">partition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">grid_dims</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">depth</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">split_thresh</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#partition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Parition the target image into tiles.</p>
<p>Optionally, subdivide tiles that straddle a mask edge or contain high
contrast, creating a grid with tiles of varied size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>grid_dims</strong><span class="classifier">int or tuple</span></dt><dd><p>number of (largest) tiles along each dimension</p>
</dd>
<dt><strong>mask</strong><span class="classifier">array or None, optional</span></dt><dd><p>Tiles that straddle a mask edge will be subdivided, creating a smooth
edge.</p>
</dd>
<dt><strong>depth</strong><span class="classifier">int, optional</span></dt><dd><p>Default is 0. Maximum times a tile can be subdivided.</p>
</dd>
<dt><strong>split_thresh</strong><span class="classifier">float or None, optional</span></dt><dd><p>Threshold of standard deviation in color above which tile should be
subdivided. This only applies if depth &gt; 0. The (somewhat arbitrary)
default is 10; a lower value leads to more aggressive splitting.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tiles</strong><span class="classifier">list</span></dt><dd><p>list of pairs of slice objects</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.translate">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">translate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tile</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#translate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Move a tile. This returns a moved copy; the original is unchaged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tile</strong><span class="classifier">tuple</span></dt><dd><p>containing y and x slice objects</p>
</dd>
<dt><strong>offset</strong><span class="classifier">tuple</span></dt><dd><p>translation, given as <code class="docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x)</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tile</strong><span class="classifier">tuple</span></dt><dd><p>a copy; the input is unchaged</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.pad">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">pad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tile</span></em>, <em class="sig-param"><span class="n">padding</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Shrink a tile in place, leaving a padding. This returns a copy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tile</strong><span class="classifier">tuple</span></dt><dd><p>containing y and x slice objects</p>
</dd>
<dt><strong>padding</strong><span class="classifier">tuple</span></dt><dd><p>number of pixels to leave along each side, given as <code class="docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x)</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tile</strong><span class="classifier">tuple</span></dt><dd><p>a copy; the input is unchaged</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.scatter">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">scatter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tiles</span></em>, <em class="sig-param"><span class="n">margin</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#scatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly nudge the tiles off center within a given margin.</p>
<p>Also, shift all tiles in the positive direction by <code class="docutils literal notranslate"><span class="pre">margin</span></code> so that no
slices are randomly placed &lt; 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>tiles</strong><span class="classifier">list</span></dt><dd><p>list of tuples of slices</p>
</dd>
<dt><strong>margin</strong><span class="classifier">tuple</span></dt><dd><p>maximum distance off tile center, given as <code class="docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x)</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tiles</strong><span class="classifier">list</span></dt><dd><p>a copy; the input is unchaged</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="matching">
<h2>Matching<a class="headerlink" href="#matching" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.simple_matcher">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">simple_matcher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pool</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#simple_matcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.simple_matcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a matching function that simply matches to the closest color.</p>
<p>It maintains an internal tree representation of the pool for fast lookups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pool</strong><span class="classifier">dict</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>match_func</strong><span class="classifier">function</span></dt><dd><p>function that accepts a color vector and returns a match</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.simple_matcher_unique">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">simple_matcher_unique</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pool</span></em>, <em class="sig-param"><span class="n">limit</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#simple_matcher_unique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.simple_matcher_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a matching function that matches to the closest color not yet used.</p>
<p>It maintains an internal copy of the pool to track which items have been
used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pool</strong><span class="classifier">dict</span></dt><dd></dd>
<dt><strong>limit</strong><span class="classifier">integer</span></dt><dd><p>Number of instances of each pool image allowed. Default is 1 (unique).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>match_func</strong><span class="classifier">function</span></dt><dd><p>function that accepts a color vector and returns a match</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="drawing">
<h2>Drawing<a class="headerlink" href="#drawing" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="photomosaic.basic_mosaic">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">basic_mosaic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">pool</span></em>, <em class="sig-param"><span class="n">grid_dims</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">mask</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">depth</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#basic_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.basic_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a mosaic in one step with some basic settings.</p>
<p>See documentation (or the source code of this function) for more
powerful features and customization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>pool</strong><span class="classifier">dict-like</span></dt><dd><p>output from <a class="reference internal" href="#photomosaic.make_pool" title="photomosaic.make_pool"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_pool()</span></code></a>; or any mapping of
arguments for opening an image file to a vector characterizing it:
e.g., <code class="docutils literal notranslate"><span class="pre">{(filename,):</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]}</span></code></p>
</dd>
<dt><strong>grid_dims</strong><span class="classifier">tuple</span></dt><dd><p>Number of tiles along height, width.</p>
</dd>
<dt><strong>mask</strong><span class="classifier">array or None, optional</span></dt><dd><p>must have same shape as <code class="docutils literal notranslate"><span class="pre">image</span></code></p>
</dd>
<dt><strong>depth</strong><span class="classifier">int, optional</span></dt><dd><p>Each tile can be subdividing this many times in regions of high
contrast or along mask edges (if applicable). Default is 0.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>mosaic</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Before making the mosaic, you need a collection of images to use as tiles.
A collection of analyzed images is a “pool”. Analyzing the images takes
much more time that making the mosaic, so it is a separate step.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span> <span class="o">=</span> <span class="n">make_pool</span><span class="p">(</span><span class="s1">&#39;directory_of_images/*.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Load an image to turn into mosaic.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skimage.io</span> <span class="kn">import</span> <span class="n">imread</span><span class="p">,</span> <span class="n">imsave</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_image</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s1">&#39;my_image.jpg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Make the mosaic and save it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mosaic</span> <span class="o">=</span> <span class="n">basic_mosaic</span><span class="p">(</span><span class="n">my_image</span><span class="p">,</span> <span class="n">pool</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imsave</span><span class="p">(</span><span class="s1">&#39;my_mosaic.jpg&#39;</span><span class="p">,</span> <span class="n">mosaic</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.draw_mosaic">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">draw_mosaic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">tiles</span></em>, <em class="sig-param"><span class="n">matches</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">resized_copy_cache</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#draw_mosaic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.draw_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble the mosaic, the final result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd><p>the “canvas” on which to draw the tiles, modified in place</p>
</dd>
<dt><strong>tiles</strong><span class="classifier">list</span></dt><dd><p>list of pairs of slice objects</p>
</dd>
<dt><strong>matches</strong><span class="classifier">list</span></dt><dd><p>for each tile in <code class="docutils literal notranslate"><span class="pre">tiles</span></code>, a tuple of arguments for opening the
matching image file</p>
</dd>
<dt><strong>scale</strong><span class="classifier">int, optional</span></dt><dd><p>Scale up tiles for higher resolution image; default is 1.
Any not-integer input will be cast to int.</p>
</dd>
<dt><strong>resized_copy_cache</strong><span class="classifier">dict or None, optional</span></dt><dd><p>cache of images from the pool, sized to fit tiles
entries look like: <code class="docutils literal notranslate"><span class="pre">(pool_key,</span> <span class="pre">(height,</span> <span class="pre">width))</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Basic usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">draw_mosaic</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">matches</span><span class="p">)</span>
</pre></div>
</div>
<p>Cache the resized pool images to speed up repeated drawings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># any mutable mapping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">draw_mosiac</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">matches</span><span class="p">,</span> <span class="n">resized_copy_cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span>
</pre></div>
</div>
<p>The above populated <code class="docutils literal notranslate"><span class="pre">cache</span></code> with every resized pool image used in a tile.
Now, <code class="docutils literal notranslate"><span class="pre">draw_mosaic</span></code> will check the cache before loading the pool image and
resizing it, which is the most expensive step.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">draw_mosiac</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">tiles</span><span class="p">,</span> <span class="n">matches</span><span class="p">,</span> <span class="n">resized_copy_cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="photomosaic.draw_tile_layout">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">draw_tile_layout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">tiles</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#draw_tile_layout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.draw_tile_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the tile edges on a copy of image. Make a dot at each tile center.</p>
<p>This is a utility for inspecting a tile layout, not a necessary step in
the mosaic-building process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>image</strong><span class="classifier">array</span></dt><dd></dd>
<dt><strong>tiles</strong><span class="classifier">list</span></dt><dd><p>list of pairs of slices, as generated by <a class="reference internal" href="#photomosaic.partition" title="photomosaic.partition"><code class="xref py py-func docutils literal notranslate"><span class="pre">partition()</span></code></a></p>
</dd>
<dt><strong>color</strong><span class="classifier">int or array</span></dt><dd><p>value to “draw” onto <code class="docutils literal notranslate"><span class="pre">image</span></code> at tile boundaries</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>annotated_image</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="color-characterization">
<h2>Color Characterization<a class="headerlink" href="#color-characterization" title="Permalink to this headline">¶</a></h2>
<p>This seems to perform worse than simply using <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code>.</p>
<dl class="py function">
<dt id="photomosaic.dominant_color">
<code class="sig-prename descclassname">photomosaic.</code><code class="sig-name descname">dominant_color</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pixels</span></em>, <em class="sig-param"><span class="n">n_clusters</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/photomosaic/photomosaic.html#dominant_color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#photomosaic.dominant_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster colors and identify the “central” color of the largest cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pixels</strong><span class="classifier">array</span></dt><dd><p>List of pixels. The second axis is expected to be the color axis.</p>
</dd>
<dt><strong>n_clusters</strong><span class="classifier">int, optional</span></dt><dd><p>number of clusters; default 5</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dominant_color</strong><span class="classifier">array</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-notes.html" class="btn btn-neutral float-right" title="Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="palette.html" class="btn btn-neutral float-left" title="Palette Adjustment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016, Photomosaic Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>